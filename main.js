!function(){"use strict";var e=class{constructor(e,t,s){let{name:r,link:n}=e;this._name=r,this._link=n,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardElement.querySelector(".card__name").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners(),this._cardElement}};class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_toggleButtonState(){this._hasInvalidInput(this._inputElements)?this.disableButton():(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal__close")&&this.close()}))}}class r extends s{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputs=this._popupElement.querySelectorAll(".modal__input")}_getInputValues(){const e=Array.from(this._inputs),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()}))}}class n{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItems(e){this._container.prepend(e)}}const o=document.querySelector("#profile-edit-button"),i=document.querySelector("#profile-edit-modal"),l=document.querySelector("#add-card-modal"),a=document.querySelector("#preview-image-modal"),c=(i.querySelector("#profile-modal-close"),l.querySelector("#add-card-modal-close"),a.querySelector("#preview-modal-close"),document.querySelector(".card__preview-image"),document.querySelector(".modal__preview-name"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-edit-form")),u=document.querySelector("#add-card-form"),d=(document.querySelector(".cards__list"),document.querySelector("#card-template").content.firstElementChild,document.querySelector(".profile__add-button")),_=document.querySelector("#profile-title-input"),h=document.querySelector("#profile-description-input"),m=(u.querySelector("#add-place-title-input"),u.querySelector("#add-place-url-input"),document.querySelectorAll(".modal__close"),l.querySelector("#add-modal-button"),{formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"});let p;const E=new class{constructor(e){let{baseUrl:t,authToken:s}=e;this._baseUrl=t,this._authToken=s}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:{authorization:this._authToken,"Content-Type":"application/json"}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{console.log(e)}))}updateUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:{authorization:this._authToken}})}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:{authorization:this._authToken}}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{console.log(e)}))}createCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:{authorization:this._authToken,"Content-Type":"application/json"},body:JSON.stringify({name:t,link:s})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",authToken:"8d021ea1-224c-4669-baf6-53caf4d7734b"});E.getInitialCards().then((e=>{p=new n({items:e,renderer:q},".cards__list"),p.renderItems()}));const S=new class extends s{constructor(e){super({popupSelector:e}),this._image=this._popupElement.querySelector(".card__preview-image"),this._caption=this._popupElement.querySelector(".modal__preview-name")}open(e){this._image.setAttribute("src",e.link),this._image.setAttribute("alt",e.name),this._caption.textContent=e.name,super.open()}}("#preview-image-modal");S.setEventListeners();const v=new r("#add-card-modal",(function(e){E.createCard().then((e=>{q(e)})),console.log(e),v.close(),k.disableButton()}));v.setEventListeners();const y=new r("#profile-edit-modal",(function(e){console.log(e),f.setUserInfo(e),y.close(),g.disableButton()}));y.setEventListeners();const f=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,description:this._jobElement.textContent}}setUserInfo(e){this._nameElement.textContent=e.name,this._jobElement.textContent=e.description}}(".profile__title",".profile__description");function b(e){S.open(e)}function q(t){const s=new e(t,"#card-template",b).getView();p.addItems(s)}E.getUserInfo().then((e=>{f.setUserInfo({name:e.name,description:e.about})})),o.addEventListener("click",(()=>{const e=f.getUserInfo();console.log(e),_.value=e.name,h.value=e.description,y.open()})),d.addEventListener("click",(()=>v.open()));const g=new t(m,c),k=new t(m,u);g.enableValidation(),k.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBZ0JOLFlBQ2hEdEQsRUFBaUJuQyxNQUFNLElBSXpCd0MsRUFBaUJqRyxpQkFBaUIsU0FBUyxJQUFNNkYsRUFBYXBDLFNBNkI5RCxNQUFNb0YsRUFBdUIsSUFBSTVILEVBQWNvRixFQUFRTixHQUNqRDJDLEVBQW1CLElBQUl6SCxFQUFjb0YsRUFBUUwsR0FFbkQ2QyxFQUFxQjFGLG1CQUNyQnVGLEVBQWlCdkYsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FQSS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlSWNvbigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soe1xuICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLFxuICAgICAgICBsaW5rOiB0aGlzLl9saW5rLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24oKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiXG4gICAgKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuXG4gICAgY29uc3QgY2FyZE5hbWUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX25hbWVcIik7XG5cbiAgICBjYXJkTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbGVtZW50cykpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZVwiKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2lucHV0cyk7XG4gICAgY29uc3QgZGF0YSA9IHt9O1xuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW1zKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuZXhwb3J0IGNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU1vZGFsQ2xvc2UgPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtbW9kYWwtY2xvc2VcIlxuKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkTW9kYWxDbG9zZSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNhZGQtY2FyZC1tb2RhbC1jbG9zZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHByZXZpZXdNb2RhbENsb3NlID0gcHJldmlld0ltYWdlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJldmlldy1tb2RhbC1jbG9zZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19wcmV2aWV3LWltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IHByZXZpZXdOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LW5hbWVcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiXG4pO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBjYXJkTGlzdEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcblxuZXhwb3J0IGNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcbmV4cG9ydCBjb25zdCBjYXJkVGl0bGVJbnB1dCA9IGFkZENhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2FkZC1wbGFjZS10aXRsZS1pbnB1dFwiXG4pO1xuZXhwb3J0IGNvbnN0IGNhcmRVcmxJbnB1dCA9IGFkZENhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLXBsYWNlLXVybC1pbnB1dFwiKTtcblxuZXhwb3J0IGNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Nsb3NlXCIpO1xuXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1tb2RhbC1idXR0b25cIik7XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxufTtcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FQSS5qc1wiO1xuaW1wb3J0IHtcbiAgaW5pdGlhbENhcmRzLFxuICBjYXJkTGlzdEVsLFxuICBwcm9maWxlRWRpdEJ0bixcbiAgcHJvZmlsZUVkaXRGb3JtLFxuICBhZGRDYXJkRm9ybSxcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcbiAgcHJvZmlsZVRpdGxlLFxuICBwcm9maWxlRGVzY3JpcHRpb24sXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcbiAgY29uZmlnLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG4vLyBDbGFzcyBJbnN0YW5jZXNcblxubGV0IHNlY3Rpb247XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGF1dGhUb2tlbjogXCI4ZDAyMWVhMS0yMjRjLTQ2NjktYmFmNi01M2NhZjRkNzczNGJcIixcbn0pO1xuXG5hcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbigoY2FyZHMpID0+IHtcbiAgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgIHtcbiAgICAgIGl0ZW1zOiBjYXJkcyxcbiAgICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxuICAgIH0sXG4gICAgXCIuY2FyZHNfX2xpc3RcIlxuICApO1xuICBzZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG59KTtcblxuLy8gZmV0Y2goXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MS91c2Vycy9tZVwiLCB7XG4vLyAgIGhlYWRlcnM6IHtcbi8vICAgICBhdXRob3JpemF0aW9uOiBcIjhkMDIxZWExLTIyNGMtNDY2OS1iYWY2LTUzY2FmNGQ3NzM0YlwiLFxuLy8gICB9LFxuLy8gfSlcbi8vICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbi8vICAgLnRoZW4oKHJlcykgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKHJlcyk7XG4vLyAgIH0pO1xuXG5jb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xucHJldmlld0ltYWdlTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkLWNhcmQtbW9kYWxcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXRcbik7XG5wcm9maWxlRWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIGNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbi8vICAge1xuLy8gICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4vLyAgICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXG4vLyAgIH0sXG4vLyAgIFwiLmNhcmRzX19saXN0XCJcbi8vICk7XG5cbi8vIHNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIucHJvZmlsZV9fdGl0bGVcIiwgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbmFwaS5nZXRVc2VySW5mbygpLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxuICAgIGRlc2NyaXB0aW9uOiB1c2VyRGF0YS5hYm91dCxcbiAgfSk7XG59KTtcblxuLy8gRnVuY3Rpb25zXG5cbi8vIEV2ZW50IEhhbmRsZXJzXG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIGNvbnNvbGUubG9nKGlucHV0VmFsdWVzKTtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xuICBwcm9maWxlRWRpdE1vZGFsLmNsb3NlKCk7XG4gIHByb2ZpbGVFZGl0VmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChpbnB1dFZhbHVlcykge1xuICBhcGkuY3JlYXRlQ2FyZCgpLnRoZW4oKHJlcykgPT4ge1xuICAgIHJlbmRlckNhcmQocmVzKTtcbiAgfSk7XG4gIGNvbnNvbGUubG9nKGlucHV0VmFsdWVzKTtcbiAgLy8gcmVuZGVyQ2FyZChpbnB1dFZhbHVlcyk7XG4gIGFkZENhcmRNb2RhbC5jbG9zZSgpO1xuICBhZGRDYXJkVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhjYXJkRGF0YSkge1xuICBwcmV2aWV3SW1hZ2VNb2RhbC5vcGVuKGNhcmREYXRhKTtcbn1cblxuLy8gRXZlbnQgTGlzdGVuZXJzXG5cbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRVc2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGNvbnNvbGUubG9nKGN1cnJlbnRVc2VyRGF0YSk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXJEYXRhLm5hbWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gY3VycmVudFVzZXJEYXRhLmRlc2NyaXB0aW9uO1xuICBwcm9maWxlRWRpdE1vZGFsLm9wZW4oKTtcbn0pO1xuXG4vLyBBZGQgTmV3IENhcmQgQnV0dG9uXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhZGRDYXJkTW9kYWwub3BlbigpKTtcblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUltYWdlQ2xpY2spLmdldFZpZXcoKTtcbiAgcmV0dXJuIGNhcmQ7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xuICBzZWN0aW9uLmFkZEl0ZW1zKGNhcmQpO1xufVxuXG4vLyBjb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG4vLyBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuLy8gICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4vLyAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4vLyAgICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4vLyAgICAgLy8gaGVyZSB5b3UgZ2V0IHRoZSBuYW1lIG9mIHRoZSBmb3JtIChpZiB5b3UgZG9u4oCZdCBoYXZlIGl0IHRoZW4geW91IG5lZWQgdG8gYWRkIGl0IGludG8gZWFjaCBmb3JtIGluIGBpbmRleC5odG1sYCBmaXJzdClcbi8vICAgICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG5cbi8vICAgICAvLyBoZXJlIHlvdSBzdG9yZSB0aGUgdmFsaWRhdG9yIHVzaW5nIHRoZSBgbmFtZWAgb2YgdGhlIGZvcm1cbi8vICAgICBmb3JtVmFsaWRhdG9yc1tmb3JtTmFtZV0gPSB2YWxpZGF0b3I7XG4vLyAgICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbi8vICAgfSk7XG4vLyB9O1xuXG4vLyBlbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XG5cbmNvbnN0IHByb2ZpbGVFZGl0VmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdEZvcm0pO1xuY29uc3QgYWRkQ2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYWRkQ2FyZEZvcm0pO1xuXG5wcm9maWxlRWRpdFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgYXV0aFRva2VuIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9hdXRoVG9rZW4gPSBhdXRoVG9rZW47XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhUb2tlbixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PlxuICAgICAgICByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcbiAgICAgIClcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRoVG9rZW4sXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT5cbiAgICAgICAgcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApXG4gICAgICApXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBjcmVhdGVDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFRva2VuLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fcHJldmlldy1pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctbmFtZVwiKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX2ltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBkYXRhLmxpbmspO1xuICAgIHRoaXMuX2ltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBkYXRhLm5hbWUpO1xuICAgIHRoaXMuX2NhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8odXNlckRhdGEpIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmRlc2NyaXB0aW9uO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEltYWdlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiZ2V0VmlldyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbGVtZW50cyIsImRpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJpbnB1dExpc3QiLCJldmVyeSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldnQiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRzIiwiX2dldElucHV0VmFsdWVzIiwiQXJyYXkiLCJmcm9tIiwiZGF0YSIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbXMiLCJlbGVtZW50IiwicHJlcGVuZCIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZUVkaXRNb2RhbCIsImFkZENhcmRNb2RhbCIsInByZXZpZXdJbWFnZU1vZGFsIiwicHJvZmlsZUVkaXRGb3JtIiwiYWRkQ2FyZEZvcm0iLCJhZGROZXdDYXJkQnV0dG9uIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwic2VjdGlvbiIsImFwaSIsImJhc2VVcmwiLCJhdXRoVG9rZW4iLCJfYmFzZVVybCIsIl9hdXRoVG9rZW4iLCJnZXRVc2VySW5mbyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZVVzZXJJbmZvIiwibWV0aG9kIiwiZ2V0SW5pdGlhbENhcmRzIiwiY3JlYXRlQ2FyZCIsIl9yZWYyIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkcyIsInJlbmRlckNhcmQiLCJfaW1hZ2UiLCJfY2FwdGlvbiIsInNldEF0dHJpYnV0ZSIsImlucHV0VmFsdWVzIiwiYWRkQ2FyZFZhbGlkYXRvciIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwcm9maWxlRWRpdFZhbGlkYXRvciIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJkZXNjcmlwdGlvbiIsInVzZXJEYXRhIiwiY2FyZERhdGEiLCJjYXJkIiwiQ2FyZCIsImFib3V0IiwiY3VycmVudFVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==